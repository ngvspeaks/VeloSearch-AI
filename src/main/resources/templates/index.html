<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>VeloIndex - Multimodal Search</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #0f172a; color: #f8fafc; margin: 0; padding: 2rem; }
        .container { max-width: 900px; margin: 0 auto; background: #1e293b; padding: 2rem; border-radius: 1rem; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); }
        h1 { font-size: 2.5rem; text-align: center; margin-bottom: 2rem; background: linear-gradient(to right, #38bdf8, #818cf8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .search-form { display: flex; gap: 0.5rem; margin-bottom: 2rem; }
        input[type="text"] { flex-grow: 1; padding: 0.75rem 1rem; border-radius: 0.5rem; border: 1px solid #334155; background: #0f172a; color: white; font-size: 1rem; }
        button { padding: 0.75rem 1.5rem; background: #38bdf8; border: none; border-radius: 0.5rem; color: #0f172a; font-weight: bold; cursor: pointer; transition: 0.2s; }
        button:hover { background: #0ea5e9; transform: translateY(-1px); }
        .main-layout { display: grid; grid-template-columns: 1fr 300px; gap: 2rem; }
        .video-container { width: 100%; border-radius: 0.5rem; overflow: hidden; background: black; }
        video { width: 100%; display: block; }
        .results { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 1rem; }
        .result-item { background: #334155; padding: 1rem; border-radius: 0.5rem; cursor: pointer; border: 2px solid transparent; transition: 0.2s; }
        .result-item:hover { border-color: #38bdf8; background: #475569; }
        .timestamp { color: #38bdf8; font-weight: bold; font-size: 0.875rem; display: block; margin-bottom: 0.5rem; }
        .description { font-size: 0.95rem; line-height: 1.4; }
        .no-results { text-align: center; color: #94a3b8; padding: 2rem; }
    </style>
</head>
<body>
    <div class="container">
        <h1>VeloIndex</h1>
        
        <form class="search-form" action="/search" method="post">
            <input type="text" name="query" placeholder="What happens in the video?" th:value="${query}" required id="searchInput">
            <button type="submit" id="searchBtn">Find Frames</button>
        </form>

        <div class="main-layout">
            <div class="video-container">
                <video id="v-player" controls>
                    <source src="/videos/video.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>

            <div>
                <h2 style="font-size: 1.25rem; margin-top: 0;">Top Results</h2>
                <div th:if="${results}" class="results">
                    <div th:each="res : ${results}" class="result-item" th:onclick="'seekTo(' + ${res.timestamp} + ')'">
                        <span class="timestamp" th:text="'@ ' + ${res.timestamp} + 's'">@ 12s</span>
                        <span class="description" th:text="${res.description}">Sample description...</span>
                    </div>
                </div>
                <div th:unless="${results}" class="no-results">
                    No results found. Try searching for "six" or "wicket".
                </div>
            </div>
        </div>
    </div>

    <script>
        function seekTo(seconds) {
            const video = document.getElementById('v-player');
            video.currentTime = seconds;
            video.play();
            video.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    </script>
</body>
</html>
