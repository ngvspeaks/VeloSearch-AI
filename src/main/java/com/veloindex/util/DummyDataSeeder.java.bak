package com.veloindex.util;

import org.springframework.ai.document.Document;
import org.springframework.ai.vectorstore.VectorStore;
import org.springframework.boot.CommandLineRunner;
import org.springframework.stereotype.Component;

import java.util.List;
import java.util.Map;

@Component
public class DummyDataSeeder implements CommandLineRunner {

    private final VectorStore vectorStore;

    public DummyDataSeeder(VectorStore vectorStore) {
        this.vectorStore = vectorStore;
    }

    @Override
    public void run(String... args) throws Exception {
        System.out.println("Seeding dummy data for test video...");

        Document doc1 = new Document("The bunny peeks out from its hole.",
                Map.of("timestamp", 2.0, "filename", "video.mp4"));

        Document doc2 = new Document("The bunny starts walking through the grass.",
                Map.of("timestamp", 5.0, "filename", "video.mp4"));

        Document doc3 = new Document("The bunny looks at the butterflies.",
                Map.of("timestamp", 8.0, "filename", "video.mp4"));

        vectorStore.add(List.of(doc1, doc2, doc3));
        System.out.println("Dummy data seeded successfully.");
    }
}
